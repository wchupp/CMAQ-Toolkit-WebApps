(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{351:function(e,t,r){},354:function(e,t,r){"use strict";r.r(t);var a=r(37),n=r.n(a),i=r(254),o=r(34),s=r(9),u=r(20),c=r(2),l=r(3),p=r(4),d=r(5),h=r(224),f=r(256),m=r(0),g=r(30),v=r(263),b=r(35),O=r(259),x=r(261),_=r(271),j=r(219),y=r(260),E=r(266),R=r(269),w=r(267),S=r(220),C=r(268),k=r(69),A=r(262),N=r(270),F=r(122),G=r(264),D=r(356),L=r(357),T=r(265);var I=function e(t,r){var a=function(t){return null!==t&&"object"===typeof t?e(t,r):r(t)};return Array.isArray(t)?t.map(a):"object"===typeof t?function(e,t){return Object.keys(e).reduce((function(r,a){return r[a]=t(e[a]),r}),{})}(t,a):t},M=r(258),H=r(222),P=r(223),U=r(233),B=(r(351),r(352),r(44));function V(e,t){try{var r=Object(D.a)(e);return Object(T.a)(r,t)}catch(a){return e}}var z={columnTypes:{dateColumnFilter:{filter:"agDateColumnFilter",filterParams:{comparator:function(e,t){return Object(L.a)(Object(D.a)(t),e)}}},numberColumnFilter:{filter:"agNumberColumnFilter"},shortDateTimeFormat:{valueFormatter:function(e){return V(e.value,"dd/MM/yyyy HH:mm")}},customDateTimeFormat:{valueFormatter:function(e){return V(e.value,e.column.colDef.custom_format_string)}},customNumericFormat:{valueFormatter:function(e){var t;return function(e,t){var r=Number.parseFloat(e);return Number.isNaN(r)?e:r.toFixed(t)}(e.value,null!==(t=e.column.colDef.precision)&&void 0!==t?t:2)}},customCurrencyFormat:{valueFormatter:function(e){return function(e,t){var r=Number.parseFloat(e);return Number.isNaN(r)?e:t+r.toFixed(2)}(e.value,e.column.colDef.custom_currency_symbol)}},timedeltaFormat:{valueFormatter:function(e){return Object(M.duration)(e.value).humanize(!0)}}}};function q(e){var t="--x_x--0_0--",r=new RegExp("".concat(t,"\\s*((function|class)\\s*.*)\\s*").concat(t)).exec(e);if(r){var a=r[1];return new Function("return "+a)()}return e}function J(e){return Object(B.jsx)(B.Fragment,{})}function W(e){return e.enableQuickSearch?Object(B.jsx)("input",{className:"ag-cell-value",type:"text",onChange:e.onChange,onKeyUp:e.showOverlay,placeholder:"quickfilter...",style:{marginLeft:5,marginRight:5}}):Object(B.jsx)(B.Fragment,{})}function Q(e){return e.manualUpdate?Object(B.jsx)("button",{onClick:e.onClick,style:{marginLeft:5,marginRight:5},children:"Update"}):Object(B.jsx)(B.Fragment,{})}function K(e){return e.enabled?Object(B.jsx)("button",{onClick:e.onClick,style:{marginLeft:5,marginRight:5},children:"Download"}):Object(B.jsx)(B.Fragment,{})}var X=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var a,i;return Object(c.a)(this,r),(i=t.call(this,e)).api=void 0,i.columnApi=void 0,i.columnFormaters=void 0,i.gridOptions=void 0,i.gridContainerRef=void 0,i.isGridAutoHeightOn=void 0,i.render=function(){var e=!0===i.props.args.enable_quicksearch||i.props.args.manual_update||"MANUAL"===i.props.args.excelExportMode;return Object(B.jsxs)("div",{id:"gridContainer",className:i.getThemeClass(),ref:i.gridContainerRef,style:i.defineContainerHeight(),children:[Object(B.jsxs)(J,{enabled:e,children:[Object(B.jsx)(Q,{manualUpdate:i.props.args.manual_update,onClick:function(e){return i.returnGridValue()}}),Object(B.jsx)(K,{enabled:"MANUAL"===i.props.args.excelExportMode,onClick:function(e){var t;return null===(t=i.api)||void 0===t?void 0:t.exportDataAsExcel()}}),Object(B.jsx)(W,{enableQuickSearch:i.props.args.enable_quicksearch,showOverlay:Object(H.throttle)((function(){return i.api.showLoadingOverlay()}),1e3,{trailing:!1}),onChange:Object(H.debounce)((function(e){i.api.setQuickFilter(e.target.value),i.api.hideOverlay()}),1e3)})]}),Object(B.jsx)(f.AgGridReact,{onGridReady:function(e){return i.onGridReady(e)},gridOptions:i.gridOptions})]})},i.gridContainerRef=n.a.createRef(),m.ModuleRegistry.register(v.a),m.ModuleRegistry.register(g.d),e.args.custom_css&&function(e){var t=function(e){var t=[];for(var r in e){var a=r+" {";for(var n in e[r])a+=n+": "+e[r][n]+";";a+="}",t.push(a)}return t.join("\n")}(e),r=document.createElement("style");r.type="text/css",r.innerText=t,document.head.appendChild(r)}(e.args.custom_css),e.args.enable_enterprise_modules&&(m.ModuleRegistry.registerModules([y.a,O.a,x.a,j.a,E.a,R.a,w.a,S.a,C.a,k.c,A.a,N.a,F.a,G.a,_.a]),"license_key"in e.args&&b.b.setLicenseKey(e.args.license_key)),i.isGridAutoHeightOn="autoHeight"===(null===(a=i.props.args.gridOptions)||void 0===a?void 0:a.domLayout),i.parseGridoptions(),i}return Object(l.a)(r,[{key:"parseGridoptions",value:function(){var e=Object.assign({},z,this.props.args.gridOptions);this.props.args.allow_unsafe_jscode&&(console.warn("flag allow_unsafe_jscode is on."),e=I(e,q)),this.gridOptions=e}},{key:"attachStreamlitRerunToEvents",value:function(e){var t=this,r=this.props.args.update_on,a=function(e){return t.returnGridValue()};r.forEach((function(t){Array.isArray(t)?e.addEventListener(t[0],Object(H.debounce)(a,t[1])):e.addEventListener(t,a)}))}},{key:"loadColumnsState",value:function(){var e=this.props.args.columns_state;null!=e&&this.columnApi.applyColumnState({state:e,applyOrder:!0})}},{key:"DownloadAsExcelIfRequested",value:function(){if(this.api){if("MULTIPLE_SHEETS"===this.props.args.excel_export_mode&&this.props.args.ExcelExportMultipleSheetParams){var e=this.props.args.ExcelExportMultipleSheetParams,t=e.data.map((function(e){return U.Buffer.from(Object(P.a)(e)).toString("latin1")}));e.data=t,this.api.exportMultipleSheetsAsExcel(e)}"TRIGGER_DOWNLOAD"===this.props.args.excel_export_mode&&this.api.exportDataAsExcel()}}},{key:"handleExcelExport",value:function(){if("FILE_BLOB_IN_GRID_RESPONSE"===this.props.args.excel_export_mode){var e,t=this.api.getDataAsExcel();return Object(u.a)(Object(s.a)().mark((function r(){return Object(s.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise((function(r,a){t.arrayBuffer().then((function(t){e=Object(P.b)(t),r(e)}))}));case 2:case"end":return r.stop()}}),r)})))(),e}if("SHEET_BLOB_IN_GRID_RESPONSE"===this.props.args.excel_export_mode){var r=this.api.getSheetDataForExcel({sheetName:Math.round(Date.now()/1e3).toString()});if(r)return Object(P.b)(U.Buffer.from(r,"latin1"))}return null}},{key:"resizeGridContainer",value:function(){var e,t=null===(e=this.gridContainerRef.current)||void 0===e?void 0:e.clientHeight;h.a.setFrameHeight(t)}},{key:"fitColumns",value:function(){switch(this.props.args.columns_auto_size_mode){case 1:case"FIT_ALL_COLUMNS_TO_VIEW":this.api.sizeColumnsToFit();break;case 2:case"FIT_CONTENTS":this.columnApi.autoSizeAllColumns()}}},{key:"getGridReturnValue",value:function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t,r,a,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=this.props.args.data_return_mode,e.t0=r,e.next=0===e.t0?5:1===e.t0?7:2===e.t0?9:11;break;case 5:return this.api.forEachLeafNode((function(e){return t.push(e.data)})),e.abrupt("break",11);case 7:return this.api.forEachNodeAfterFilter((function(e){e.group||t.push(e.data)})),e.abrupt("break",11);case 9:return this.api.forEachNodeAfterFilterAndSort((function(e){e.group||t.push(e.data)})),e.abrupt("break",11);case 11:return a={},this.api.forEachDetailGridInfo((function(e){var t;a[e.id]=[],null===(t=e.api)||void 0===t||t.forEachNode((function(t){t.isSelected()&&a[e.id].push(t)}))})),n={originalDtypes:this.props.args.frame_dtypes,rowData:t,selectedRows:this.api.getSelectedRows(),selectedItems:this.api.getSelectedNodes().map((function(e,t){return Object(o.a)({_selectedRowNodeInfo:{nodeRowIndex:e.rowIndex,nodeId:e.id}},e.data)})),colState:this.columnApi.getColumnState(),ExcelBlob:this.handleExcelExport()},e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"returnGridValue",value:function(){this.getGridReturnValue().then((function(e){return h.a.setComponentValue(e)}))}},{key:"defineContainerHeight",value:function(){return this.isGridAutoHeightOn?{width:this.props.width}:{width:this.props.width,height:this.props.args.height}}},{key:"getThemeClass",value:function(){var e;this.props.args.theme,null===(e=this.props.theme)||void 0===e||e.base;return"ag-theme-alpine"}},{key:"componentDidUpdate",value:function(e,t,r){var a=e.args.excel_export_mode,n=this.props.args.excel_export_mode;("TRIGGER_DOWNLOAD"!==a&&"TRIGGER_DOWNLOAD"===n||"MULTIPLE_SHEETS"!==a&&"MULTIPLE_SHEETS"===n)&&this.DownloadAsExcelIfRequested(),this.props.args.reload_data&&this.api&&this.api.setRowData(JSON.parse(this.props.args.row_data)),this.resizeGridContainer()}},{key:"onGridReady",value:function(e){var t=this;this.api=e.api,this.columnApi=e.columnApi,this.api.addEventListener("rowGroupOpened",(function(e){return t.resizeGridContainer()})),this.api.addEventListener("firstDataRendered",(function(e){t.resizeGridContainer(),t.fitColumns(),console.log("here")})),this.attachStreamlitRerunToEvents(this.api),this.api.forEachDetailGridInfo((function(e){void 0!==e.api&&t.attachStreamlitRerunToEvents(e.api)})),this.api.setRowData(JSON.parse(this.props.args.row_data)),this.processPreselection()}},{key:"processPreselection",value:function(){var e;if(this.props.args.gridOptions.preSelectAllRows||!1)this.api.selectAll(),this.returnGridValue();else if(this.gridOptions.preSelectedRows||(null===(e=this.gridOptions.preSelectedRows)||void 0===e?void 0:e.length())>0)for(var t in this.gridOptions.preSelectedRows){var r;null===(r=this.api.getRowNode(t))||void 0===r||r.setSelected(!0,!1,!0),this.returnGridValue()}}}]),r}(n.a.Component),Y=Object(h.b)(X),Z=document.getElementById("root");Z&&Object(i.createRoot)(Z).render(Object(B.jsx)(Y,{}))}},[[354,1,2]]]);
//# sourceMappingURL=main.96ffdac6.chunk.js.map