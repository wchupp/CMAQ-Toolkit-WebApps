(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{338:function(e,t,a){},341:function(e,t,a){"use strict";a.r(t);var r=a(36),n=a.n(r),i=a(118),o=a.n(i),s=a(33),u=a(2),c=a(3),d=a(5),l=a(6),p=a(123),m=a(253),h=a(0),f=a(30),v=a(259),g=a(35),y=a(256),b=a(257),O=a(268),F=a(219),_=a(258),C=a(263),j=a(265),w=a(264),k=a(220),R=a(266),D=a(68),N=a(262),A=a(267),E=a(116),S=a(260),x=a(344),G=a(343),H=a(261);var T=function e(t,a){var r=function(t){return null!==t&&"object"===typeof t?e(t,a):a(t)};return Array.isArray(t)?t.map(r):"object"===typeof t?function(e,t){return Object.keys(e).reduce((function(a,r){return a[r]=t(e[r]),a}),{})}(t,r):t},U=a(255),I=a(218),M=(a(338),a(339),a(75));var J=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var r,i,o=this;Object(u.a)(this,a),(i=t.call(this,e)).frameDtypes=void 0,i.api=void 0,i.columnApi=void 0,i.columnFormaters=void 0,i.manualUpdateRequested=!1,i.allowUnsafeJsCode=!1,i.gridOptions=void 0,i.gridContainerRef=void 0,i.isGridAutoHeightOn=void 0,i.convertJavascriptCodeOnGridOptions=function(e){return T(e,i.convertStringToFunction)},i.render=function(){if(void 0!==i.api&&i.state.should_update){var e=!1;i.api.forEachNode((function(t,a){e=!I.isEqual(i.state.rowData[a],t.data)})),i.api.setRowData(i.state.rowData),e&&(i.returnGridValue("event"),e=!1)}return i.loadColumnsState(),Object(M.jsxs)("div",{id:"gridContainer",className:i.getThemeClass(),ref:i.gridContainerRef,style:i.defineContainerHeight(),children:[Object(M.jsx)(o.ManualUpdateButton,{manual_update:i.manualUpdateRequested,onClick:function(e){return i.returnGridValue(e)}}),Object(M.jsx)(m.AgGridReact,{onGridReady:function(e){return i.onGridReady(e)},gridOptions:i.gridOptions})]})},console.log(e),h.ModuleRegistry.register(v.a),h.ModuleRegistry.register(f.d),e.args.custom_css&&function(e){var t=function(e){var t=[];for(var a in e){var r=a+" {";for(var n in e[a])r+=n+": "+e[a][n]+";";r+="}",t.push(r)}return t.join("\n")}(e),a=document.createElement("style");a.type="text/css",a.innerText=t,document.head.appendChild(a)}(e.args.custom_css),e.args.enable_enterprise_modules&&(h.ModuleRegistry.registerModules([_.a,y.a,b.a,F.a,C.a,j.a,w.a,k.a,R.a,D.c,N.a,A.a,E.a,S.a,O.a]),"license_key"in e.args&&g.b.setLicenseKey(e.args.license_key)),i.frameDtypes=i.props.args.frame_dtypes,i.manualUpdateRequested=1===i.props.args.update_mode,i.allowUnsafeJsCode=i.props.args.allow_unsafe_jscode,i.gridContainerRef=n.a.createRef(),i.isGridAutoHeightOn="autoHeight"===(null===(r=i.props.args.gridOptions)||void 0===r?void 0:r.domLayout),i.columnFormaters={columnTypes:{dateColumnFilter:{filter:"agDateColumnFilter",filterParams:{comparator:function(e,t){return Object(x.a)(Object(G.a)(t),e)}}},numberColumnFilter:{filter:"agNumberColumnFilter"},shortDateTimeFormat:{valueFormatter:function(e){return i.dateFormatter(e.value,"dd/MM/yyyy HH:mm")}},customDateTimeFormat:{valueFormatter:function(e){return i.dateFormatter(e.value,e.column.colDef.custom_format_string)}},customNumericFormat:{valueFormatter:function(e){var t;return i.numberFormatter(e.value,null!==(t=e.column.colDef.precision)&&void 0!==t?t:2)}},customCurrencyFormat:{valueFormatter:function(e){return i.currencyFormatter(e.value,e.column.colDef.custom_currency_symbol)}},timedeltaFormat:{valueFormatter:function(e){return Object(U.duration)(e.value).humanize(!0)}}}};var s=Object.assign({},i.columnFormaters,i.props.args.gridOptions);return i.allowUnsafeJsCode&&(console.warn("flag allow_unsafe_jscode is on."),s=i.convertJavascriptCodeOnGridOptions(s)),i.gridOptions=s,i.state={rowData:JSON.parse(e.args.row_data),gridHeight:i.props.args.height,should_update:!1},i}return Object(c.a)(a,[{key:"convertStringToFunction",value:function(e){var t="--x_x--0_0--",a=new RegExp("".concat(t,"\\s*((function|class)\\s*.*)\\s*").concat(t)).exec(e);if(a){var r=a[1];return new Function("return "+r)()}return e}},{key:"attachUpdateEvents",value:function(e){var t=this,a=this.props.args.update_on,r=function(e){return t.returnGridValue(e)};a.forEach((function(t){Array.isArray(t)?e.addEventListener(t[0],Object(I.debounce)(r,t[1])):e.addEventListener(t,r)}))}},{key:"loadColumnsState",value:function(){var e=this.props.args.columns_state;null!=e&&this.columnApi.applyColumnState({state:e,applyOrder:!0})}},{key:"onGridReady",value:function(e){var t=this;for(var a in this.api=e.api,this.columnApi=e.columnApi,this.attachUpdateEvents(this.api),this.api.forEachDetailGridInfo((function(e){void 0!==e.api&&t.attachUpdateEvents(e.api)})),this.api.addEventListener("firstDataRendered",(function(e){return t.fitColumns()})),this.api.setRowData(this.state.rowData),this.gridOptions.preSelectedRows)this.api.selectIndex(this.gridOptions.preSelectedRows[a],!0,!0);if(this.isGridAutoHeightOn){var r,n=null===(r=this.gridContainerRef.current)||void 0===r?void 0:r.clientHeight;p.a.setFrameHeight(n)}this.returnGridValue("event")}},{key:"fitColumns",value:function(){switch(this.props.args.columns_auto_size_mode){case 1:case"FIT_ALL_COLUMNS_TO_VIEW":this.api.sizeColumnsToFit();break;case 2:case"FIT_CONTENTS":this.columnApi.autoSizeAllColumns()}}},{key:"dateFormatter",value:function(e,t){try{var a=Object(G.a)(e);return Object(H.a)(a,t)}catch(r){return e}}},{key:"currencyFormatter",value:function(e,t){var a=Number.parseFloat(e);return Number.isNaN(a)?e:t+a.toFixed(2)}},{key:"numberFormatter",value:function(e,t){var a=Number.parseFloat(e);return Number.isNaN(a)?e:a.toFixed(t)}},{key:"returnGridValue",value:function(e){console.log(e);var t=[];switch(this.props.args.data_return_mode){case 0:this.api.forEachLeafNode((function(e){return t.push(e.data)}));break;case 1:this.api.forEachNodeAfterFilter((function(e){e.group||t.push(e.data)}));break;case 2:this.api.forEachNodeAfterFilterAndSort((function(e){e.group||t.push(e.data)}))}var a={};this.api.forEachDetailGridInfo((function(e){var t;a[e.id]=[],null===(t=e.api)||void 0===t||t.forEachNode((function(t){t.isSelected()&&a[e.id].push(t)}))}));var r={originalDtypes:this.frameDtypes,rowData:t,selectedRows:this.api.getSelectedRows(),selectedItems:this.api.getSelectedNodes().map((function(e){return Object(s.a)({rowIndex:e.rowIndex},e.data)})),colState:this.columnApi.getColumnState()};p.a.setComponentValue(r)}},{key:"ManualUpdateButton",value:function(e){return e.manual_update?Object(M.jsx)("button",{onClick:e.onClick,children:"Update"}):Object(M.jsx)("span",{})}},{key:"defineContainerHeight",value:function(){return this.isGridAutoHeightOn?{width:this.props.width}:{width:this.props.width,height:this.state.gridHeight}}},{key:"getThemeClass",value:function(){var e,t=this.props.args.theme,a="ag-theme-"+t;return"dark"===(null===(e=this.props.theme)||void 0===e?void 0:e.base)&&"material"!==t&&(a+="-dark"),a}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.args.reload_data?{rowData:JSON.parse(e.args.row_data),gridHeight:e.args.height,should_update:!0}:{gridHeight:e.args.height}}}]),a}(p.b),L=Object(p.c)(J);o.a.render(Object(M.jsx)(n.a.StrictMode,{children:Object(M.jsx)(L,{})}),document.getElementById("root"))}},[[341,1,2]]]);
//# sourceMappingURL=main.9035be39.chunk.js.map